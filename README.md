# ü•ó Recipe & Grocery Planner - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –∏ –ø–æ–∫—É–ø–æ–∫

REST API –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞–º–∏, –∏–Ω–≥—Ä–µ–¥–∏–µ–Ω—Ç–∞–º–∏ –∏ —Å–ø–∏—Å–∫–∞–º–∏ –ø–æ–∫—É–ø–æ–∫. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —Å–æ—Ö—Ä–∞–Ω—è—Ç—å —Ä–µ—Ü–µ–ø—Ç—ã, —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏–∑ –Ω–∏—Ö —Å–ø–∏—Å–∫–∏ –ø–æ–∫—É–ø–æ–∫.

## üõ†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **–ë—ç–∫–µ–Ω–¥**: FastAPI
- **ORM**: SQLAlchemy 2.0 + Alembic
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: Pydantic
- **–°–£–ë–î**: PostgreSQL
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è**: Docker + Docker Compose + Poetry
- **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**: Pytest
- **–§—Ä–æ–Ω—Ç–µ–Ω–¥**: Jinja + HTML/CSS/JS (Free Template Simple House)

## üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ:

- üì¶ API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å–ø–∏—Å–∫–∞–º–∏ –ø–æ–∫—É–ø–æ–∫

- üßë –†–∞–±–æ—Ç–∞ —Å –ø—Ä–æ—Ñ–∏–ª–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- üîÅ –°–≤—è–∑–∏:
    
  `User ‚Üî ShoppingLists` (–æ–¥–∏–Ω –∫–æ –º–Ω–æ–≥–∏–º)  
  `ShoppingLists ‚Üî Products` (–º–Ω–æ–≥–∏–µ –∫–æ –º–Ω–æ–≥–∏–º)  

## üì° –≠–Ω–¥–ø–æ–∏–Ω—Ç—ã

### üî∏ Auth
- `POST /api/v1/auth/login` ‚Äî –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `POST /api/v1/auth/logout` ‚Äî –í—ã—Ö–æ–¥ –∏–∑ —Å–∏—Å—Ç–µ–º—ã.
- `POST /api/v1/auth/register` ‚Äî –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `POST /api/v1/auth/request-verify-token` ‚Äî –ó–∞–ø—Ä–æ—Å —Ç–æ–∫–µ–Ω–∞ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏.
- `POST /api/v1/auth/verify` ‚Äî –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ email.
- `POST /api/v1/auth/forgot-password` ‚Äî –ó–∞–ø—Ä–æ—Å —Å–±—Ä–æ—Å–∞ –ø–∞—Ä–æ–ª—è.
- `POST /api/v1/auth/reset-password` ‚Äî –°–±—Ä–æ—Å –ø–∞—Ä–æ–ª—è.

### üî∏ Users
- `GET /api/v1/users/me` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `PATCH /api/v1/users/me` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è.
- `GET /api/v1/users/{id}` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID.
- `PATCH /api/v1/users/{id}` ‚Äî –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
- `DELETE /api/v1/users/{id}` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.

### üî∏ Messages
- `GET /api/v1/messages` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—É–±–ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.
- `GET /api/v1/messages/secrets` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π.

### üî∏ Products
- `GET /api/v1/products/` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤.
- `POST /api/v1/products/` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞.
- `GET /api/v1/products/{product_id}/` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞ –ø–æ ID.
- `PUT /api/v1/products/{product_id}/` ‚Äî –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞.
- `DELETE /api/v1/products/{product_id}/` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–¥—É–∫—Ç–∞.

### üî∏ Recipes
- `GET /api/v1/recipes/` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ä–µ—Ü–µ–ø—Ç–æ–≤.
- `POST /api/v1/recipes/` ‚Äî –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞.
- `GET /api/v1/recipes/{recipe_id}/` ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞ –ø–æ ID.
- `PUT /api/v1/recipes/{recipe_id}/` ‚Äî –ü–æ–ª–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞.
- `PATCH /api/v1/recipes/{recipe_id}/` ‚Äî –ß–∞—Å—Ç–∏—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞
- `DELETE /api/v1/recipes/{recipe_id}/` ‚Äî –£–¥–∞–ª–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–∞.
- `POST /api/v1/recipes/upload/recipe-image` ‚Äî –ó–∞–≥—Ä—É–∑–∫–∞ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞.

### üî∏ Views
- `GET /Home` ‚Äî –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞.
- `GET /login` ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ –≤—Ö–æ–¥–∞.
- `GET /register` ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏.
- `GET /profile` ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ –ø—Ä–æ—Ñ–∏–ª—è.
- `GET /profile_info` ‚Äî –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ –∏ –µ–≥–æ —Ä–µ—Ü–µ–ø—Ç–∞—Ö.
- `GET /recipes` ‚Äî –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ–∑–¥–∞–Ω–∏—è —Ä–µ—Ü–µ–ø—Ç–∞.

## üê≥ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å Docker:

### üîπ 1. –ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞:
```
git clone https://github.com/MaxBakshaev/FastAPI-Recipe-And-Grocery-Planner.git
```
```
cd FastAPI-Recipe-And-Grocery-Planner
```

### üîπ 2. –°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª—ã –æ–∫—Ä—É–∂–µ–Ω–∏—è:

–î–ª—è Linux –∏–ª–∏ macOS:
```
mkdir -p app && touch app/.env app/.env.postgres
```
–î–ª—è Windows:
```
type nul > app\.env
type nul > app\.env.postgres
```

### üîπ 3. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `app/.env`:

3.1. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```
APP_CONFIG__DB__URL=postgresql+asyncpg://user:pwd@localhost:5432/DBname
APP_CONFIG__DB__ECHO=1
APP_CONFIG__ACCESS_TOKEN__RESET_PASSWORD_TOKEN_SECRET=
APP_CONFIG__ACCESS_TOKEN__VERIFICATION_TOKEN_SECRET=
```
3.2. ‚úèÔ∏è –ó–∞–º–µ–Ω–∏—Ç–µ –≤ APP_CONFIG__DB__URL:

- `user` ‚Äî –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ë–î
- `pwd` ‚Äî –ø–∞—Ä–æ–ª—å
- `DBname` ‚Äî –Ω–∞–∑–≤–∞–Ω–∏–µ –ë–î

üîë –°–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ —Å–µ–∫—Ä–µ—Ç–Ω—ã–µ –∫–ª—é—á–∏ –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ APP_CONFIG__ACCESS_TOKEN__RESET_PASSWORD_TOKEN_SECRET –∏ APP_CONFIG__ACCESS_TOKEN__VERIFICATION_TOKEN_SECRET:

```
python -c "import secrets; print(secrets.token_urlsafe(32))"
```

### üîπ 4. –ù–∞—Å—Ç—Ä–æ–π—Ç–µ —Ñ–∞–π–ª `app/.env.postgres`:

4.1. –î–æ–±–∞–≤—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –≤–∞—à–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏:
```
POSTGRES_USER=–≤–∞—à–µ_–∏–º—è_–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
POSTGRES_PASSWORD=–≤–∞—à_–ø–∞—Ä–æ–ª—å
POSTGRES_DB=–≤–∞—à–µ_–Ω–∞–∑–≤–∞–Ω–∏–µ_–ë–î
```

### üîπ 5. –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤:

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Docker Desktop –∑–∞–ø—É—â–µ–Ω. –ó–∞—Ç–µ–º —Å–æ–∑–¥–∞–π—Ç–µ –∏ –∑–∞–ø—É—Å—Ç–∏—Ç–µ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:
```
make bup
```
–û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:
```
make stop
```
- üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã —Å–º–æ—Ç—Ä–∏—Ç–µ –≤ `Makefile`.

### üîπ 6. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:

- üè† –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ: http://127.0.0.1:8000/

- üìö Swagger UI: http://127.0.0.1:8000/docs

- üìò Redoc: http://127.0.0.1:8000/redoc

### üîπ 7. üß™ –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```
make test
```